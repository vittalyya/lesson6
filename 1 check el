if (!elem.firstChild) 
  { узел elem пуст }
  
  /**
  * нет в таком случае у тебя будет просто проверяться есть ли в элементе elem первый дочерний элемент 
  * а нужно бы проверить есть ли там вообще какие либо элементы
  */

if (!elem.lastChild) 
  { узел elem пуст }

  /**
  * нет в таком случае у тебя будет просто проверяться есть ли в элементе elem последний дочерний элемент 
  * а нужно бы проверить есть ли там вообще какие либо элементы
  */
